{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/mern/ticketing/view/pages/_app.js\",\n    _this = this;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport 'bootstrap/dist/css/bootstrap.css';\nimport axios from 'axios'; // import buildClient from '../api/build-client';\n\nimport Header from '../components/header';\n\nvar AppComponent = function AppComponent(_ref) {\n  var Component = _ref.Component,\n      pageProps = _ref.pageProps,\n      currentUser = _ref.currentUser;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      currentUser: currentUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 8,\n      columnNumber: 5\n    }, _this), /*#__PURE__*/_jsxDEV(Component, _objectSpread({}, pageProps), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 5\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 7,\n    columnNumber: 10\n  }, _this);\n};\n\n_c = AppComponent;\n\nAppComponent.getInitialProps = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(appContext) {\n    var data, pageProps;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            data = null;\n\n            if (!false) {\n              _context.next = 9;\n              break;\n            }\n\n            _context.next = 4;\n            return axios.get('http://localhost:3001/api/users/currentuser', {\n              withCredentials: true,\n              credentials: 'include',\n              headers: appContext.ctx.req.headers\n            });\n\n          case 4:\n            data = _context.sent;\n            console.log('this is app component from server');\n            console.log(data);\n            _context.next = 14;\n            break;\n\n          case 9:\n            _context.next = 11;\n            return axios.get('http://localhost:3001/api/users/currentuser', {\n              withCredentials: true,\n              credentials: 'include'\n            });\n\n          case 11:\n            data = _context.sent;\n            console.log('this is app component from user');\n            console.log(data);\n\n          case 14:\n            pageProps = {};\n\n            if (!appContext.Component.getInitialProps) {\n              _context.next = 19;\n              break;\n            }\n\n            _context.next = 18;\n            return appContext.Component.getInitialProps(appContext.ctx);\n\n          case 18:\n            pageProps = _context.sent;\n\n          case 19:\n            return _context.abrupt(\"return\", {\n              pageProps: pageProps,\n              currentUser: data.data.currentUser\n            });\n\n          case 20:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}(); // AppComponent.getInitialProps = async (appContext) => {\n//   const client = buildClient(appContext.ctx);\n//   const data = await client.get('/api/users/currentuser');\n//   let pageProps = {};\n// if(appContext.Component.getInitialProps){\n//   pageProps = await appContext.Component.getInitialProps(appContext.ctx);\n// }\n//   return data;\n// };\n\n\nexport default AppComponent;\n\nvar _c;\n\n$RefreshReg$(_c, \"AppComponent\");","map":{"version":3,"sources":["/home/mern/ticketing/view/pages/_app.js"],"names":["axios","Header","AppComponent","Component","pageProps","currentUser","getInitialProps","appContext","data","get","withCredentials","credentials","headers","ctx","req","console","log"],"mappings":";;;;;;;;;;;;AAAA,OAAO,kCAAP;AACA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;;AACA,OAAOC,MAAP,MAAmB,sBAAnB;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,OAA2C;AAAA,MAAxCC,SAAwC,QAAxCA,SAAwC;AAAA,MAA7BC,SAA6B,QAA7BA,SAA6B;AAAA,MAAlBC,WAAkB,QAAlBA,WAAkB;AAC9D,sBAAO;AAAA,4BACL,QAAC,MAAD;AAAQ,MAAA,WAAW,EAAEA;AAArB;AAAA;AAAA;AAAA;AAAA,aADK,eAEL,QAAC,SAAD,oBAAeD,SAAf;AAAA;AAAA;AAAA;AAAA,aAFK;AAAA;AAAA;AAAA;AAAA;AAAA,WAAP;AAID,CALD;;KAAMF,Y;;AAONA,YAAY,CAACI,eAAb;AAAA,uEAA+B,iBAAOC,UAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACzBC,YAAAA,IADyB,GAClB,IADkB;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAGdR,KAAK,CAACS,GAAN,CAAU,6CAAV,EAAyD;AACpEC,cAAAA,eAAe,EAAE,IADmD;AAC7CC,cAAAA,WAAW,EAAE,SADgC;AACrBC,cAAAA,OAAO,EAAEL,UAAU,CAACM,GAAX,CAAeC,GAAf,CAAmBF;AADP,aAAzD,CAHc;;AAAA;AAG3BJ,YAAAA,IAH2B;AAM3BO,YAAAA,OAAO,CAACC,GAAR,CAAY,mCAAZ;AACAD,YAAAA,OAAO,CAACC,GAAR,CAAYR,IAAZ;AAP2B;AAAA;;AAAA;AAAA;AAAA,mBASdR,KAAK,CAACS,GAAN,CAAU,6CAAV,EAAyD;AACpEC,cAAAA,eAAe,EAAE,IADmD;AAC7CC,cAAAA,WAAW,EAAE;AADgC,aAAzD,CATc;;AAAA;AAS3BH,YAAAA,IAT2B;AAY3BO,YAAAA,OAAO,CAACC,GAAR,CAAY,iCAAZ;AACAD,YAAAA,OAAO,CAACC,GAAR,CAAYR,IAAZ;;AAb2B;AAgBzBJ,YAAAA,SAhByB,GAgBb,EAhBa;;AAAA,iBAiB1BG,UAAU,CAACJ,SAAX,CAAqBG,eAjBK;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAkBTC,UAAU,CAACJ,SAAX,CAAqBG,eAArB,CAAqCC,UAAU,CAACM,GAAhD,CAlBS;;AAAA;AAkB3BT,YAAAA,SAlB2B;;AAAA;AAAA,6CAqBtB;AACLA,cAAAA,SAAS,EAATA,SADK;AAELC,cAAAA,WAAW,EAAEG,IAAI,CAACA,IAAL,CAAUH;AAFlB,aArBsB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA/B;;AAAA;AAAA;AAAA;AAAA,I,CA2BA;AACA;AACA;AACA;AACE;AACA;AACA;AACF;AACA;;;AAEA,eAAeH,YAAf","sourcesContent":["import 'bootstrap/dist/css/bootstrap.css'\nimport axios from 'axios';\n// import buildClient from '../api/build-client';\nimport Header from '../components/header';\n\nconst AppComponent = ({ Component, pageProps, currentUser }) => {\n  return <div>\n    <Header currentUser={currentUser}/>\n    <Component {...pageProps} />\n  </div>;\n};\n\nAppComponent.getInitialProps = async (appContext) => {\n  let data = null;\n  if(typeof window === 'undefined') {\n    data = await axios.get('http://localhost:3001/api/users/currentuser', {\n      withCredentials: true, credentials: 'include', headers: appContext.ctx.req.headers\n    });\n    console.log('this is app component from server')\n    console.log(data);\n  } else {\n    data = await axios.get('http://localhost:3001/api/users/currentuser', {\n      withCredentials: true, credentials: 'include'\n    });\n    console.log('this is app component from user')\n    console.log(data);\n  }\n\n  let pageProps = {};\n  if(appContext.Component.getInitialProps){\n    pageProps = await appContext.Component.getInitialProps(appContext.ctx);\n  }\n\n  return { \n    pageProps, \n    currentUser: data.data.currentUser\n  };\n};\n\n// AppComponent.getInitialProps = async (appContext) => {\n//   const client = buildClient(appContext.ctx);\n//   const data = await client.get('/api/users/currentuser');\n//   let pageProps = {};\n  // if(appContext.Component.getInitialProps){\n  //   pageProps = await appContext.Component.getInitialProps(appContext.ctx);\n  // }\n//   return data;\n// };\n\nexport default AppComponent;"]},"metadata":{},"sourceType":"module"}